(()=>{"use strict";var e,n={963:()=>{const e=window.wp.blocks,n=window.wp.hooks,o=window.ReactJSXRuntime,t=(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 8L14.5 4H9.5L12 8ZM3.5 17.5L3.5 10.5H20.5V17.5H3.5ZM2 10.5C2 9.67157 2.67157 9 3.5 9H20.5C21.3284 9 22 9.67157 22 10.5V17.5C22 18.3284 21.3284 19 20.5 19H3.5C2.67157 19 2 18.3284 2 17.5V10.5Z"})});function l(e){var n,o,t="";if("string"==typeof e||"number"==typeof e)t+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(n=0;n<r;n++)e[n]&&(o=l(e[n]))&&(t&&(t+=" "),t+=o)}else for(o in e)e[o]&&(t&&(t+=" "),t+=o);return t}const r=function(){for(var e,n,o=0,t="",r=arguments.length;o<r;o++)(e=arguments[o])&&(n=l(e))&&(t&&(t+=" "),t+=n);return t},s=window.wp.blockEditor,i=window.wp.components,a=window.wp.element,c=window.wp.a11y,u=window.wp.compose,d=window.wp.data,p=window.wp.primitives,h=(0,o.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,o.jsx)(p.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})}),g=window.wp.i18n,w=window.wp.keycodes,f=window.wp.url,m=()=>(0,o.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,o.jsx)(i.Path,{d:"M1.50002 4L6.00002 8L10.5 4",strokeWidth:"1.5"})}),_=[...s.__experimentalLinkControl.DEFAULT_LINK_SETTINGS,{id:"nofollow",title:(0,g.__)("Mark as nofollow")}],x=(0,s.withColors)({overlayBackgroundColor:"color"})((function({attributes:e,setAttributes:n,isSelected:t,clientId:l,overlayBackgroundColor:p,setOverlayBackgroundColor:x}){const{label:b,url:k,description:v,rel:C,title:j,showSubmenuIcon:B,openSubmenusOnClick:y,opensInNewTab:S,customOverlayBackgroundColor:T,templateLock:R}=e,O=!!C?.includes("nofollow"),[I,M]=(0,a.useState)(!1),[N,L]=(0,a.useState)(!1),[H,D]=(0,a.useState)(0),[E,A]=(0,a.useState)(0),[V,P]=(0,a.useState)(0),[z,G]=(0,a.useState)(null),U=(0,g.__)("Add textâ€¦"),Z=(0,a.useRef)(null),F=(0,a.useRef)(null),$=(0,a.useMemo)((()=>({url:k,opensInNewTab:S,nofollow:O})),[k,S,O]),q=(0,a.useCallback)((()=>{A(`${F.current.getBoundingClientRect().y+F.current.getBoundingClientRect().height}px`),P(`${F.current.getBoundingClientRect().x+F.current.getBoundingClientRect().width}px`)}),[A,P]),J=(0,a.useCallback)((()=>{q(),L(!0)}),[q,L]),K=(0,a.useCallback)((()=>{A(0),P(0),L(!1)}),[A,P,L]),W=(0,d.useSelect)((e=>!!e(s.store).getBlock(l)?.innerBlocks?.length),[l]);(0,a.useLayoutEffect)((()=>{var e;const n=null!==(e=F.current.closest(".site-header"))&&void 0!==e?e:F.current.closest(".wp-block-navigation"),o=F.current?.ownerDocument;let t;const l=o?.defaultView;l.ResizeObserver&&(t=new l.ResizeObserver((e=>D(e[0].contentBoxSize))),t.observe(n));const r=o?.documentElement?.classList?.contains("interface-interface-skeleton__html-container")?o.querySelector(".interface-interface-skeleton__content"):o;return r.addEventListener("scroll",q),()=>{t&&t.disconnect(),r.removeEventListener("scroll",q)}}),[]);const X=(0,d.useSelect)((e=>{const{isBlockSelected:n,hasSelectedInnerBlock:o}=e(s.store);return o(l,!0)||n(l)}),[l]);(0,a.useEffect)((()=>{X?J():K()}),[X,b,W,H]),(0,a.useEffect)((()=>{y||k||M(!0)}),[]),(0,a.useEffect)((()=>{t||M(!1)}),[t]),(0,a.useEffect)((()=>{I&&k&&(0,f.isURL)((0,f.prependHTTP)(b))&&/^.+\.[a-z]+/.test(b)&&function(){Z.current.focus();const{ownerDocument:e}=Z?.current,{defaultView:n}=Z?.current?.ownerDocument,o=n.getSelection(),t=e.createRange();t.selectNodeContents(Z.current),o.removeAllRanges(),o.addRange(t)}()}),[k]);const Q=(0,s.useBlockProps)({ref:(0,u.useMergeRefs)([G,F]),className:r("unitone-mega-menu","wp-block-navigation-item",{"has-link":!!k,"open-on-click":y})}),{children:Y,...ee}=(0,s.useInnerBlocksProps)({className:r("unitone-mega-menu__container",{"open-on-click":y,"has-background":p.slug||T,[`has-${p.slug}-background-color`]:p.slug}),style:{"--unitone--top":E,"--unitone--left":V,backgroundColor:p.slug?`var( --wp--preset--color--${p.slug} )`:T}},{templateLock:R,renderAppender:s.InnerBlocks.ButtonBlockAppender}),ne=B||y?"":(0,g.__)('The current menu options offer reduced accessibility for users and are not recommended. Enabling either "Open on Click" or "Show arrow" offers enhanced accessibility by allowing keyboard users to browse submenus selectively.'),oe=y?"button":"a";return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.BlockControls,{children:(0,o.jsx)(i.ToolbarGroup,{children:!y&&(0,o.jsx)(i.ToolbarButton,{name:"link",icon:h,title:(0,g.__)("Link"),shortcut:w.displayShortcut.primary("k"),onClick:()=>{M(!0)}})})}),(0,o.jsxs)(s.InspectorControls,{children:[(0,o.jsxs)(i.PanelBody,{title:(0,g.__)("Settings"),children:[(0,o.jsx)(i.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:b||"",onChange:e=>{n({label:e})},label:(0,g.__)("Text"),autoComplete:"off"}),(0,o.jsx)(i.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:k||"",onChange:e=>{n({url:e})},label:(0,g.__)("Link"),autoComplete:"off"}),(0,o.jsx)(i.TextareaControl,{__nextHasNoMarginBottom:!0,value:v||"",onChange:e=>{n({description:e})},label:(0,g.__)("Description"),help:(0,g.__)("The description will be displayed in the menu if the current theme supports it.")}),(0,o.jsx)(i.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:j||"",onChange:e=>{n({title:e})},label:(0,g.__)("Title attribute"),autoComplete:"off",help:(0,g.__)("Additional information to help clarify the purpose of the link.")}),(0,o.jsx)(i.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:C||"",onChange:e=>{n({rel:e})},label:(0,g.__)("Rel attribute"),autoComplete:"off",help:(0,g.__)("The relationship of the linked URL as space-separated link types.")})]}),(0,o.jsxs)(i.PanelBody,{title:(0,g.__)("Display"),children:[(0,o.jsx)(i.ToggleControl,{__nextHasNoMarginBottom:!0,checked:y,onChange:e=>{n({openSubmenusOnClick:e,...e&&{showSubmenuIcon:!0}})},label:(0,g.__)("Open on click")}),(0,o.jsx)(i.ToggleControl,{__nextHasNoMarginBottom:!0,checked:B,onChange:e=>{n({showSubmenuIcon:e})},disabled:e.openSubmenusOnClick,label:(0,g.__)("Show arrow")}),ne&&(0,o.jsx)("div",{children:(0,o.jsx)(i.Notice,{spokenMessage:null,status:"warning",isDismissible:!1,children:ne})})]})]}),(0,o.jsx)(s.InspectorControls,{group:"color",children:(0,o.jsx)(s.__experimentalColorGradientSettingsDropdown,{__experimentalIsRenderedInSidebar:!0,settings:[{label:(0,g.__)("Mega menu background","unitone"),colorValue:p.color,onColorChange:e=>{x(e),n({customOverlayBackgroundColor:e})}}],panelId:l,...(0,s.__experimentalUseMultipleOriginColorsAndGradients)(),gradients:[],disableCustomGradients:!0})}),(0,o.jsxs)("div",{...Q,children:[(0,o.jsxs)(oe,{className:"wp-block-navigation-item__content","aria-expanded":N,children:[(0,o.jsx)(s.RichText,{ref:Z,identifier:"label",className:"wp-block-navigation-item__label",value:b,onChange:e=>n({label:e}),"aria-label":(0,g.__)("Mega menu link text","unitone"),placeholder:U,allowedFormats:["core/bold","core/italic","core/image","core/strikethrough"],onClick:()=>{y||k||M(!0),N||J()}}),!y&&I&&(0,o.jsx)(i.Popover,{placement:"bottom",onClose:()=>{M(!1),Z.current.focus()},anchor:z,focusOnMount:!1,shift:!0,children:(0,o.jsx)(s.__experimentalLinkControl,{value:$,onChange:({url:e,opensInNewTab:o,nofollow:t})=>{let l=[...(null!=C?C:"").split(" ")];t?l.push("nofollow"):l=l.filter((e=>"nofollow"!==e)),n({rel:Array.from(new Set(l)).join(" ").trim(),url:encodeURI((0,f.safeDecodeURI)(e)),opensInNewTab:void 0!==o})},onRemove:()=>{n({url:""}),(0,c.speak)((0,g.__)("Link removed."),"assertive"),Z.current.focus()},settings:_,focus:!0})})]}),(B||y)&&(0,o.jsx)("span",{className:"wp-block-navigation__submenu-icon",children:(0,o.jsx)(m,{})}),(0,o.jsx)("div",{...ee,children:(0,o.jsx)("div",{className:"unitone-mega-menu__placement",children:Y})})]})]})}));(0,e.registerBlockType)("unitone/mega-menu",{icon:{src:t},edit:x,save:function(){return(0,o.jsx)(s.InnerBlocks.Content,{})}}),(0,n.addFilter)("blocks.registerBlockType","unitone/mega-menu/add-to-navigation",((e,n)=>{var o;return"core/navigation"!==n?e:{...e,allowedBlocks:[...null!==(o=e.allowedBlocks)&&void 0!==o?o:[],"unitone/mega-menu"]}}))}},o={};function t(e){var l=o[e];if(void 0!==l)return l.exports;var r=o[e]={exports:{}};return n[e](r,r.exports,t),r.exports}t.m=n,e=[],t.O=(n,o,l,r)=>{if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],l=e[u][1],r=e[u][2];for(var i=!0,a=0;a<o.length;a++)(!1&r||s>=r)&&Object.keys(t.O).every((e=>t.O[e](o[a])))?o.splice(a--,1):(i=!1,r<s&&(s=r));if(i){e.splice(u--,1);var c=l();void 0!==c&&(n=c)}}return n}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,l,r]},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={7735:0,1023:0};t.O.j=n=>0===e[n];var n=(n,o)=>{var l,r,s=o[0],i=o[1],a=o[2],c=0;if(s.some((n=>0!==e[n]))){for(l in i)t.o(i,l)&&(t.m[l]=i[l]);if(a)var u=a(t)}for(n&&n(o);c<s.length;c++)r=s[c],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(u)},o=self.webpackChunk=self.webpackChunk||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))})();var l=t.O(void 0,[1023],(()=>t(963)));l=t.O(l)})();